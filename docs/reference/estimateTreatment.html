<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Estimate Treatment Mechanisms — estimateTreatment • survtmle</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Estimate Treatment Mechanisms — estimateTreatment" />
<meta property="og:description" content="This function computes the conditional probability of having
 trt for each specified level either using glm
 or SuperLearner. Currently, only two unique
 values of treatment are acceptable. By default the function will compute
 estimates of the conditional probability of trt == max(trt) and
 compute the probability of trt == min(trt) as one minus this
 probability." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">survtmle</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/survtmle_intro.html">Targeted Learning for Survival Analysis with Competing Risks</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/benkeser/survtmle/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Estimate Treatment Mechanisms</h1>
    <small class="dont-index">Source: <a href='https://github.com/benkeser/survtmle/blob/master/R/treatment_estimate.R'><code>R/treatment_estimate.R</code></a></small>
    <div class="hidden name"><code>estimateTreatment.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function computes the conditional probability of having
 <code>trt</code> for each specified level either using <code><a href='https://rdrr.io/r/stats/glm.html'>glm</a></code>
 or <code><a href='https://rdrr.io/pkg/SuperLearner/man/SuperLearner.html'>SuperLearner</a></code>. Currently, only two unique
 values of treatment are acceptable. By default the function will compute
 estimates of the conditional probability of <code>trt == max(trt)</code> and
 compute the probability of <code>trt == min(trt)</code> as one minus this
 probability.</p>
    </div>

    <pre class="usage"><span class='fu'>estimateTreatment</span>(
  <span class='no'>dat</span>,
  <span class='no'>adjustVars</span>,
  <span class='kw'>glm.trt</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>SL.trt</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='no'>cvControl</span>,
  <span class='kw'>returnModels</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>gtol</span> <span class='kw'>=</span> <span class='fl'>0.001</span>,
  <span class='no'>...</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>dat</th>
      <td><p>An object of class <code>data.frame</code>. Must have named column
<code>trt</code>.</p></td>
    </tr>
    <tr>
      <th>adjustVars</th>
      <td><p>An object of class <code>data.frame</code> that will be used
either as the <code>data</code> argument in a call to <code><a href='https://rdrr.io/r/stats/glm.html'>glm</a></code> or
as <code>X</code> in a call to <code><a href='https://rdrr.io/pkg/SuperLearner/man/SuperLearner.html'>SuperLearner</a></code>.</p></td>
    </tr>
    <tr>
      <th>glm.trt</th>
      <td><p>A character formula for the right-hand side of the
<code><a href='https://rdrr.io/r/stats/formula.html'>formula</a></code> in a call to <code><a href='https://rdrr.io/r/stats/glm.html'>glm</a></code>. See the
documentation of <code><a href='survtmle.html'>survtmle</a></code> for information. Alternatively,
this could be an object of class <code><a href='https://rdrr.io/r/stats/glm.html'>glm</a></code> (as in calls to
this function via <code><a href='timepoints.html'>timepoints</a></code>), in which case predictions are
obtained using this object with no new fitting.</p></td>
    </tr>
    <tr>
      <th>SL.trt</th>
      <td><p>A specification of the <code>SL.library</code> option of a call to
<code><a href='https://rdrr.io/pkg/SuperLearner/man/SuperLearner.html'>SuperLearner</a></code>. See the documentation of
<code><a href='survtmle.html'>survtmle</a></code> for more information. Alternatively, this could be
an object of class <code>SuperLearner</code> (as in calls to this function via
<code><a href='timepoints.html'>timepoints</a></code>), in which case predictions are obtained using
this object with no new fitting.</p></td>
    </tr>
    <tr>
      <th>cvControl</th>
      <td><p>A <code>list</code> providing control options to be fed directly
into calls to <code><a href='https://rdrr.io/pkg/SuperLearner/man/SuperLearner.html'>SuperLearner</a></code>. This should match
the contents of <code>SuperLearner.CV.control</code> exactly. For details,
consult the documentation of the <span class="pkg">SuperLearner</span> package. This is passed
in from <code><a href='mean_tmle.html'>mean_tmle</a></code> or <code><a href='hazard_tmle.html'>hazard_tmle</a></code> via
<code><a href='survtmle.html'>survtmle</a></code>.</p></td>
    </tr>
    <tr>
      <th>returnModels</th>
      <td><p>A <code>logical</code> indicating whether fitted model objects
should be returned.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>A <code>logical</code> passed to the <code>verbose</code> option of the
call to <code><a href='https://rdrr.io/pkg/SuperLearner/man/SuperLearner.html'>SuperLearner</a></code>.</p></td>
    </tr>
    <tr>
      <th>gtol</th>
      <td><p>The truncation level of predicted trt probabilities to handle
positivity violations.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Other arguments. Not currently used</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>dat The input <code>data.frame</code> object with two added columns
 corresponding with the conditional probability (given <code>adjustVars</code>) of
 <code>trt==max(trt)</code> and <code>trt==min(trt)</code>.</p>
<p>trtMod If <code>returnModels = TRUE</code>, the fitted <code>glm</code> or
 <code>SuperLearner</code> object. Otherwise, <code>NULL</code></p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by David Benkeser, Nima Hejazi.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


