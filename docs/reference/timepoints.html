<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Evaluate Results over Time Points of Interest — timepoints • survtmle</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Evaluate Results over Time Points of Interest — timepoints" />

<meta property="og:description" content="Wrapper function for survtmle that takes a fitted survtmle
object and computes the TMLE estimated incidence for all times specified in
the times argument. For this function to work, the original call to
survtmle should have been executed with returnModels = TRUE.
This allows the function to be more efficient than repeated calls to
survtmle in that timepoints will use fitted censoring (and
hazard if method=&quot;hazard&quot; was used in the original call) estimates. It
is therefore advisable that the vector times used in the call to
timepoints not include times beyond the time specified in t0 in
the original call to survtmle. This can be ensured be making the
original call to survtmle with t0 = max(ftime)." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">survtmle</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/survtmle_intro.html">Targeted Learning for Survival Analysis with Competing Risks</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/benkeser/survtmle">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Evaluate Results over Time Points of Interest</h1>
    <small class="dont-index">Source: <a href='https://github.com/benkeser/survtmle/blob/master/R/timepoints.R'><code>R/timepoints.R</code></a></small>
    <div class="hidden name"><code>timepoints.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Wrapper function for <code>survtmle</code> that takes a fitted <code>survtmle</code>
object and computes the TMLE estimated incidence for all times specified in
the <code>times</code> argument. For this function to work, the original call to
<code>survtmle</code> should have been executed with <code>returnModels = TRUE</code>.
This allows the function to be more efficient than repeated calls to
<code>survtmle</code> in that <code>timepoints</code> will use fitted censoring (and
hazard if <code>method="hazard"</code> was used in the original call) estimates. It
is therefore advisable that the vector <code>times</code> used in the call to
<code>timepoints</code> not include times beyond the time specified in <code>t0</code> in
the original call to <code>survtmle</code>. This can be ensured be making the
original call to <code>survtmle</code> with <code>t0 = max(ftime)</code>.</p>
    
    </div>

    <pre class="usage"><span class='fu'>timepoints</span>(<span class='no'>object</span>, <span class='no'>times</span>, <span class='kw'>returnModels</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>A fitted <code>survtmle</code> object with <code>returnModels = TRUE</code></p></td>
    </tr>
    <tr>
      <th>times</th>
      <td><p>The times to evaluate incidence.</p></td>
    </tr>
    <tr>
      <th>returnModels</th>
      <td><p>Should the function return fitted GLM or Super Learner
models at each timepoint. If set to <code>TRUE</code>, memory issues could
arise depending on the number of timepoints specified and the size of
the Super Learner library.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <code>tp.survtmle</code> with number of entries equal to
        <code><a href='https://www.rdocumentation.org/packages/base/topics/length'>length(times)</a></code>. Each entry is named "tX", where X denotes a
        single value of <code>times</code>.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># simulate data</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/Random'>set.seed</a></span>(<span class='fl'>1234</span>)
<span class='no'>n</span> <span class='kw'>&lt;-</span> <span class='fl'>100</span>
<span class='no'>ftime</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/Round'>round</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/Uniform'>runif</a></span>(<span class='no'>n</span>, <span class='fl'>1</span>, <span class='fl'>4</span>))
<span class='no'>ftype</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/Round'>round</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/Uniform'>runif</a></span>(<span class='no'>n</span>, <span class='fl'>0</span>, <span class='fl'>2</span>))
<span class='no'>trt</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/Binomial'>rbinom</a></span>(<span class='no'>n</span>, <span class='fl'>1</span>, <span class='fl'>0.5</span>)
<span class='no'>adjustVars</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></span>(<span class='kw'>W1</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/Normal'>rnorm</a></span>(<span class='no'>n</span>), <span class='kw'>W2</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/Normal'>rnorm</a></span>(<span class='no'>n</span>))

<span class='co'># fit an initial survtmle object with t0=max(ftime)</span>
<span class='no'>fm</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='survtmle.html'>survtmle</a></span>(<span class='kw'>ftime</span> <span class='kw'>=</span> <span class='no'>ftime</span>, <span class='kw'>ftype</span> <span class='kw'>=</span> <span class='no'>ftype</span>,
               <span class='kw'>trt</span> <span class='kw'>=</span> <span class='no'>trt</span>, <span class='kw'>adjustVars</span> <span class='kw'>=</span> <span class='no'>adjustVars</span>,
               <span class='kw'>glm.trt</span> <span class='kw'>=</span> <span class='st'>"1"</span>, <span class='kw'>glm.ftime</span> <span class='kw'>=</span> <span class='st'>"trt + W1 + W2"</span>,
               <span class='kw'>glm.ctime</span> <span class='kw'>=</span> <span class='st'>"trt + W1 + W2"</span>, <span class='kw'>method</span><span class='kw'>=</span><span class='st'>"mean"</span>,
               <span class='kw'>returnModels</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='co'># call timepoints to get cumulative incidence estimates at each timepoint</span>
<span class='no'>allTimes</span> <span class='kw'>&lt;-</span> <span class='fu'>timepoints</span>(<span class='kw'>object</span> <span class='kw'>=</span> <span class='no'>fm</span>, <span class='kw'>times</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>4</span>, <span class='kw'>returnModels</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='co'># look at results for time 1</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/class'>class</a></span>(<span class='no'>allTimes</span>$<span class='no'>t1</span>)</div><div class='output co'>#&gt; [1] "survtmle"</div><div class='input'><span class='no'>allTimes</span>$<span class='no'>t1</span></div><div class='output co'>#&gt; $est
#&gt;           [,1]
#&gt; 0 1 0.11420933
#&gt; 1 1 0.08893310
#&gt; 0 2 0.09813023
#&gt; 1 2 0.02051795
#&gt; 
#&gt; $var
#&gt;               0 1           1 1           0 2           1 2
#&gt; 0 1  1.851155e-03  3.343729e-05 -1.918862e-04 -4.921541e-06
#&gt; 1 1  3.343729e-05  1.679328e-03 -1.913208e-05 -3.350074e-05
#&gt; 0 2 -1.918862e-04 -1.913208e-05  1.933470e-03  5.318150e-09
#&gt; 1 2 -4.921541e-06 -3.350074e-05  5.318150e-09  3.632602e-04
#&gt; </div><div class='input'><span class='co'># look at results for time 2</span>
<span class='no'>allTimes</span>$<span class='no'>t2</span></div><div class='output co'>#&gt; $est
#&gt;          [,1]
#&gt; 0 1 0.2725236
#&gt; 1 1 0.2440495
#&gt; 0 2 0.1758847
#&gt; 1 2 0.2003141
#&gt; 
#&gt; $var
#&gt;               0 1           1 1           0 2           1 2
#&gt; 0 1  4.513203e-03  6.160159e-05 -9.378340e-04  5.297656e-05
#&gt; 1 1  6.160159e-05  4.270541e-03 -8.875712e-05 -1.167929e-03
#&gt; 0 2 -9.378340e-04 -8.875712e-05  3.664619e-03  1.676504e-05
#&gt; 1 2  5.297656e-05 -1.167929e-03  1.676504e-05  3.802279e-03
#&gt; </div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by David Benkeser, Nima Hejazi.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

